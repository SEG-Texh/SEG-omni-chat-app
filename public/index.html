<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Omni Chat App</title>
  <link rel="stylesheet" href="styles.css" />
</head>
<body>
  <!-- LOGIN -->
  <div id="loginContainer" class="container">
    <div class="logo">
      <div class="logo-icon">üí¨</div>
      <h1>Omni Chat</h1>
      <p>Connect across all platforms</p>
    </div>
    <form id="loginForm" class="login-form">
      <div class="form-group">
        <label>Email</label>
        <input type="email" id="email" required placeholder="Enter your email" />
      </div>
      <div class="form-group">
        <label>Password</label>
        <input type="password" id="password" required placeholder="Enter your password" />
      </div>
      <button type="submit" class="btn btn-primary">
        <span id="loginText">Login</span>
        <span id="loginSpinner" class="spinner" style="display:none;"></span>
      </button>
      <div id="loginError" class="error"></div>
    </form>
  </div>

  <!-- DASHBOARD & CHAT -->
  <div id="appContainer" style="display:none;">
    <div class="header">
      <div class="header-left">
        <div class="logo-small">üí¨</div>
        <h2>Omni Chat</h2>
      </div>
      <div class="user-info">
        <div id="userAvatar" class="user-avatar">A</div>
        <div class="user-details">
          <div id="userName">Admin User</div>
          <div id="userRole" class="badge admin">Admin</div>
        </div>
        <button class="btn btn-secondary" onclick="logout()">Logout</button>
      </div>
    </div>

    <div class="nav-tabs">
      <button class="tab-btn active" onclick="switchTab('dashboard', event)">
        <span class="tab-icon">üìä</span>
        Dashboard
      </button>
      <button class="tab-btn" onclick="switchTab('facebook', event)">
        <span class="tab-icon">
          <img src="images/@facebook-2-logo-svgrepo-com.svg" alt="Facebook" style="width:20px; height:20px; vertical-align:middle;">
        </span>
        Facebook
      </button>
      <button class="tab-btn" onclick="switchTab('whatsapp', event)">
        <span class="tab-icon">
          <img src="images/@whatsapp-svgrepo-com.svg" alt="WhatsApp" style="width:20px; height:20px; vertical-align:middle;">
        </span>
        WhatsApp
      </button>
      <button class="tab-btn" onclick="switchTab('accounts', event)">
        <span class="tab-icon">üë§</span>
        Accounts
      </button>      
    </div>

    <div id="dashboardTab" class="tab-content active">
      <div class="dashboard">
        <!-- Stats Cards -->
        <div class="stats-grid">
          <div class="stat-card">
            <div class="stat-icon">üë•</div>
            <div class="stat-content">
              <h3 id="totalUsers">--</h3>
              <p>Total Users</p>
              <span class="stat-change positive" id="totalUsersChange"></span>
            </div>
          </div>
          <div class="stat-card">
            <div class="stat-icon">üí¨</div>
            <div class="stat-content">
              <h3 id="messagesToday">--</h3>
              <p>Messages Today</p>
              <span class="stat-change positive" id="messagesTodayChange"></span>
            </div>
          </div>
          <div class="stat-card">
            <div class="stat-icon">‚ö°</div>
            <div class="stat-content">
              <h3 id="responseRate">--</h3>
              <p>Response Rate</p>
              <span class="stat-change" id="responseRateChange"></span>
            </div>
          </div>
          <div class="stat-card">
            <div class="stat-icon">üéØ</div>
            <div class="stat-content">
              <h3 id="activeChats">--</h3>
              <p>Active Chats</p>
              <span class="stat-change positive" id="activeChatsChange"></span>
            </div>
          </div>
        </div>

        <!-- Charts Section -->
        <div class="charts-grid">
          <!-- Message Volume Chart -->
          <div class="chart-card">
            <div class="chart-header">
              <h3>Message Volume</h3>
              <select class="chart-filter" id="messageVolumeFilter">
                <option>Last 7 days</option>
                <option>Last 30 days</option>
                <option>Last 3 months</option>
              </select>
            </div>
            <div class="bar-chart">
              <div class="bar-chart-container" id="barChartContainer">
                <!-- Real bars will be rendered by JS -->
              </div>
            </div>
          </div>

          <!-- Platform Distribution -->
          <div class="chart-card">
            <div class="chart-header">
              <h3>Platform Distribution</h3>
            </div>
            <div class="pie-chart">
              <div class="pie-chart-container" id="pieChartContainer">
                <!-- Real slices will be rendered by JS -->
              </div>
              <div class="pie-legend" id="pieLegend">
                <!-- Real legend will be rendered by JS -->
              </div>
            </div>
          </div>

          <!-- Response Rate Trend -->
          <div class="chart-card full-width">
            <div class="chart-header">
              <h3>Response Rate Trend</h3>
            </div>
            <div class="line-chart">
              <div class="line-chart-container">
                <svg viewBox="0 0 400 200" class="line-chart-svg">
                  <!-- Real chart will be rendered by JS -->
                </svg>
                <div class="line-chart-labels" id="lineChartLabels">
                  <!-- Real labels will be rendered by JS -->
                </div>
              </div>
            </div>
          </div>
        </div>

     

    <div id="accountsTab" class="tab-content active">
      <div class="account-management">
        <!-- Account Management Header Bar -->
        <div class="account-header-bar">
          <h1>Account Management System</h1>
          <p>Admin Dashboard - Add users and manage roles efficiently</p>
        </div>
        <!-- Main Content: Add User + User Statistics -->
        <div class="account-main-cards">
          <div class="main-content">
            <!-- Add User Card -->
            <div class="card add-user-card">
              <h2>Add New User</h2>
              <div class="success-message" id="successMessage" style="display:none;">User added successfully!</div>
              <div class="error-message" id="errorMessage" style="display:none;">Please fill in all required fields.</div>
              <form id="addUserForm">
                <div class="form-group">
                  <label for="fullName">Full Name *</label>
                  <input type="text" id="fullName" name="fullName" required>
                </div>
                <div class="form-group">
                  <label for="email">Email Address *</label>
                  <input type="email" id="email" name="email" required>
                </div>
                <div class="form-group">
                  <label for="username">Username *</label>
                  <input type="text" id="username" name="username" required>
                </div>
                <div class="form-group">
                  <label>Assign Roles *</label>
                  <div class="role-selection">
                    <label class="role-card">
                      <input type="radio" name="role" value="admin" class="role-checkbox" required>
                      Administrator
                    </label>
                    <label class="role-card">
                      <input type="radio" name="role" value="supervisor" class="role-checkbox">
                      Supervisor
                    </label>
                    <label class="role-card">
                      <input type="radio" name="role" value="user" class="role-checkbox">
                      User
                    </label>
                  </div>
                </div>
                <div class="form-group">
                  <label for="password">Password *</label>
                  <input type="password" id="password" name="password" required>
                </div>
                <button type="submit" class="btn btn-primary">Add User</button>
              </form>
            </div>
            <!-- User Statistics Card -->
            <div class="card user-stats-card">
              <h2>User Statistics</h2>
              <div class="stats-grid" style="margin-top:1rem;">
                <div class="stat-card"><div class="stat-icon">üë•</div><div class="stat-content"><h3 id="statTotalUsers">--</h3><p>Total Users</p></div></div>
                <div class="stat-card"><div class="stat-icon">‚úÖ</div><div class="stat-content"><h3 id="statActiveUsers">--</h3><p>Active Users</p></div></div>
                <div class="stat-card"><div class="stat-icon">‚è∏Ô∏è</div><div class="stat-content"><h3 id="statInactiveUsers">--</h3><p>Inactive Users</p></div></div>
                <div class="stat-card"><div class="stat-icon">üõ°Ô∏è</div><div class="stat-content"><h3 id="statAdmins">--</h3><p>Admins</p></div></div>
                <div class="stat-card"><div class="stat-icon">üëî</div><div class="stat-content"><h3 id="statSupervisors">--</h3><p>Supervisors</p></div></div>
                <div class="stat-card"><div class="stat-icon">üë§</div><div class="stat-content"><h3 id="statUsers">--</h3><p>Users</p></div></div>
              </div>
            </div>
          </div>
        </div>
        <!-- Existing Users Table -->
        <div class="card users-table">
          <h2>Existing Users</h2>
          <div class="table-container">
            <table>
              <thead>
                <tr>
                  <th>Name</th>
                  <th>Email</th>
                  <th>Username</th>
                  <th>Role</th>
                  <th>Status</th>
                  <th>Actions</th>
                </tr>
              </thead>
              <tbody id="usersTableBody">
                <tr>
                  <td>Jane Doe</td>
                  <td>jane@example.com</td>
                  <td>janedoe</td>
                  <td><span class="user-role-badge admin">Admin</span></td>
                  <td><span class="user-status active">Active</span></td>
                  <td class="user-actions">
                    <button class="btn-edit">Edit</button>
                    <button class="btn-delete">Delete</button>
                  </td>
                </tr>
                <!-- Users will be rendered here by JS -->
              </tbody>
            </table>
          </div>
        </div>
      </div>
    </div>

    <div id="facebookTab" class="tab-content active">
      <div class="chat-interface">
        <h2>Facebook Chat</h2>
        <div class="chat-container">
          <!-- Sidebar -->
          <div class="chat-sidebar">
            <div class="chat-search">
              <input type="text" placeholder="Search conversations..." id="facebookSearchInput" />
            </div>
            <div class="chat-list" id="facebookChatList">
              <!-- Dynamic chat items will be appended here -->
            </div>
          </div>

          <!-- Main Chat Area -->
          <div class="chat-main">
            <div class="chat-header" id="facebookChatHeader">
              <!-- Dynamic user details will go here -->
            </div>
            <div class="chat-messages" id="facebookChatMessages">
              <div class="chat-message from-me">
                <div class="bubble">Your message here</div>
              </div>
              <div class="chat-message from-them">
                <div class="bubble">Their message here</div>
              </div>
              <!-- Dynamic messages will be loaded here -->
            </div>
            <div class="chat-input">
              <input type="text" placeholder="Type a message..." id="facebookMessageInput" />
              <button class="btn btn-primary" id="facebookSendButton">Send</button>
            </div>
          </div>
        </div>
      </div>
    </div>

    <div id="whatsappTab" class="tab-content active">
      <div class="chat-interface">
        <h2>WhatsApp Chat</h2>
        <div class="chat-container">
          <!-- Similar structure to Facebook tab -->
          <div class="chat-sidebar">
            <div class="chat-search">
              <input type="text" placeholder="Search conversations..." />
            </div>
            <div class="chat-list" id="whatsappChatList">
              <!-- WhatsApp conversations will be dynamically loaded here -->
            </div>
          </div>
          <div class="chat-main">
            <div class="chat-header" id="whatsappChatHeader">
              <!-- WhatsApp chat user details will be dynamically loaded here -->
            </div>
            <div class="chat-messages" id="whatsappChatMessages">
              <div class="chat-message from-me">
                <div class="bubble">Your WhatsApp message here</div>
              </div>
              <div class="chat-message from-them">
                <div class="bubble">Their WhatsApp message here</div>
              </div>
              <!-- Messages will be dynamically loaded here -->
            </div>
            <div class="chat-input">
              <input type="text" placeholder="Type a message..." id="whatsappMessageInput" />
              <button class="btn btn-primary" id="whatsappSendButton">Send</button>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <script src="https://cdn.jsdelivr.net/npm/socket.io-client@4.7.2/dist/socket.io.min.js"></script>
  <script src="script.js"></script>
  <script>
    const initialTab = window.location.hash.replace('#', '') || 'dashboard';
    switchTab(initialTab, null, false);
  </script>
</body>
</html>
