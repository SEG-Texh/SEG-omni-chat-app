<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Omni Chat App</title>
  <link rel="stylesheet" href="styles.css" />
</head>
<body>
  <!-- LOGIN -->
  <div id="loginContainer" class="container">
    <div class="logo">
      <div class="logo-icon">üí¨</div>
      <h1>Omni Chat</h1>
      <p>Connect across all platforms</p>
    </div>
    <form id="loginForm" class="login-form">
      <div class="form-group">
        <label>Email</label>
        <input type="email" id="email" required placeholder="Enter your email" />
      </div>
      <div class="form-group">
        <label>Password</label>
        <input type="password" id="password" required placeholder="Enter your password" />
      </div>
      <button type="submit" class="btn btn-primary">
        <span id="loginText">Login</span>
        <span id="loginSpinner" class="spinner" style="display:none;"></span>
      </button>
      <div id="loginError" class="error"></div>
    </form>
  </div>

  <!-- DASHBOARD & CHAT -->
  <div id="appContainer" style="display:none;">
    <div class="header">
      <div class="header-left">
        <div class="logo-small">üí¨</div>
        <h2>Omni Chat</h2>
      </div>
      <div class="user-info">
        <div id="userAvatar" class="user-avatar">A</div>
        <div class="user-details">
          <div id="userName">Admin User</div>
          <div id="userRole" class="badge admin">Admin</div>
        </div>
        <button class="btn btn-secondary" onclick="logout()">Logout</button>
      </div>
    </div>

    <div class="nav-tabs">
      <button class="tab-btn active" onclick="switchTab('dashboard')">
        <span class="tab-icon">üìä</span>
        Dashboard
      </button>
      <button class="tab-btn" onclick="switchTab('facebook')">
        <span class="tab-icon">üìò</span>
        Facebook
      </button>
      <button class="tab-btn" onclick="switchTab('whatsapp')">
        <span class="tab-icon">üíö</span>
        WhatsApp
      </button>
      <button class="tab-btn" onclick="switchTab('accounts', event)">
        <span class="tab-icon">üë§</span>
        Accounts
      </button>      
    </div>

    <div id="dashboardTab" class="tab-content active">
      <div class="dashboard">
        <!-- Stats Cards -->
        <div class="stats-grid">
          <div class="stat-card">
            <div class="stat-icon">üë•</div>
            <div class="stat-content">
              <h3 id="totalUsers">--</h3>
              <p>Total Users</p>
              <span class="stat-change positive" id="totalUsersChange"></span>
            </div>
          </div>
          <div class="stat-card">
            <div class="stat-icon">üí¨</div>
            <div class="stat-content">
              <h3 id="messagesToday">--</h3>
              <p>Messages Today</p>
              <span class="stat-change positive" id="messagesTodayChange"></span>
            </div>
          </div>
          <div class="stat-card">
            <div class="stat-icon">‚ö°</div>
            <div class="stat-content">
              <h3 id="responseRate">--</h3>
              <p>Response Rate</p>
              <span class="stat-change" id="responseRateChange"></span>
            </div>
          </div>
          <div class="stat-card">
            <div class="stat-icon">üéØ</div>
            <div class="stat-content">
              <h3 id="activeChats">--</h3>
              <p>Active Chats</p>
              <span class="stat-change positive" id="activeChatsChange"></span>
            </div>
          </div>
        </div>

        <!-- Charts Section -->
        <div class="charts-grid">
          <!-- Message Volume Chart -->
          <div class="chart-card">
            <div class="chart-header">
              <h3>Message Volume</h3>
              <select class="chart-filter" id="messageVolumeFilter">
                <option>Last 7 days</option>
                <option>Last 30 days</option>
                <option>Last 3 months</option>
              </select>
            </div>
            <div class="bar-chart">
              <div class="bar-chart-container" id="barChartContainer">
                <!-- Real bars will be rendered by JS -->
              </div>
            </div>
          </div>

          <!-- Platform Distribution -->
          <div class="chart-card">
            <div class="chart-header">
              <h3>Platform Distribution</h3>
            </div>
            <div class="pie-chart">
              <div class="pie-chart-container" id="pieChartContainer">
                <!-- Real slices will be rendered by JS -->
              </div>
              <div class="pie-legend" id="pieLegend">
                <!-- Real legend will be rendered by JS -->
              </div>
            </div>
          </div>

          <!-- Response Time Trend -->
          <div class="chart-card full-width">
            <div class="chart-header">
              <h3>Response Time Trend</h3>
            </div>
            <div class="line-chart">
              <div class="line-chart-container">
                <svg viewBox="0 0 400 200" class="line-chart-svg">
                  <!-- Real chart will be rendered by JS -->
                </svg>
                <div class="line-chart-labels" id="lineChartLabels">
                  <!-- Real labels will be rendered by JS -->
                </div>
              </div>
            </div>
          </div>
        </div>

        <!-- Recent Activity & Top Agents -->
        <div class="bottom-grid">
          <div class="activity-card">
            <div class="card-header">
              <h3>Recent Activity</h3>
              <button class="btn btn-sm">View All</button>
            </div>
            <div class="activity-list">
              <div class="activity-item">
                <div class="activity-avatar">üë§</div>
                <div class="activity-content">
                  <p><strong>John Doe</strong> started a new conversation</p>
                  <span class="activity-time">2 minutes ago</span>
                </div>
                <div class="activity-platform facebook">FB</div>
              </div>
              <div class="activity-item">
                <div class="activity-avatar">üë©</div>
                <div class="activity-content">
                  <p><strong>Sarah Wilson</strong> resolved a ticket</p>
                  <span class="activity-time">5 minutes ago</span>
                </div>
                <div class="activity-platform whatsapp">WA</div>
              </div>
              <div class="activity-item">
                <div class="activity-avatar">üë®</div>
                <div class="activity-content">
                  <p><strong>Mike Johnson</strong> sent a broadcast message</p>
                  <span class="activity-time">12 minutes ago</span>
                </div>
                <div class="activity-platform facebook">FB</div>
              </div>
              <div class="activity-item">
                <div class="activity-avatar">üë©</div>
                <div class="activity-content">
                  <p><strong>Emma Davis</strong> updated customer profile</p>
                  <span class="activity-time">18 minutes ago</span>
                </div>
                <div class="activity-platform whatsapp">WA</div>
              </div>
            </div>
          </div>

          <div class="agents-card">
            <div class="card-header">
              <h3>Top Performing Agents</h3>
            </div>
            <div class="agents-list">
              <div class="agent-item">
                <div class="agent-rank">1</div>
                <div class="agent-avatar">A</div>
                <div class="agent-info">
                  <div class="agent-name">Alice Cooper</div>
                  <div class="agent-stats">847 messages ‚Ä¢ 98% satisfaction</div>
                </div>
                <div class="agent-score">98%</div>
              </div>
              <div class="agent-item">
                <div class="agent-rank">2</div>
                <div class="agent-avatar">B</div>
                <div class="agent-info">
                  <div class="agent-name">Bob Smith</div>
                  <div class="agent-stats">723 messages ‚Ä¢ 96% satisfaction</div>
                </div>
                <div class="agent-score">96%</div>
              </div>
              <div class="agent-item">
                <div class="agent-rank">3</div>
                <div class="agent-avatar">C</div>
                <div class="agent-info">
                  <div class="agent-name">Carol Johnson</div>
                  <div class="agent-stats">692 messages ‚Ä¢ 94% satisfaction</div>
                </div>
                <div class="agent-score">94%</div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <div id="accountsTab" class="tab-content">
      <div class="account-management">
        <!-- Account Management Header Bar -->
        <div class="account-header-bar">
          <h1>Account Management System</h1>
          <p>Admin Dashboard - Add users and manage roles efficiently</p>
        </div>
        <!-- Main Content: Add User + User Statistics -->
        <div class="account-main-cards">
          <div class="main-content">
            <!-- Add User Card -->
            <div class="card add-user-card">
              <h2>Add New User</h2>
              <div class="success-message" id="successMessage" style="display:none;">User added successfully!</div>
              <div class="error-message" id="errorMessage" style="display:none;">Please fill in all required fields.</div>
              <form id="addUserForm">
                <div class="form-group">
                  <label for="fullName">Full Name *</label>
                  <input type="text" id="fullName" name="fullName" required>
                </div>
                <div class="form-group">
                  <label for="email">Email Address *</label>
                  <input type="email" id="email" name="email" required>
                </div>
                <div class="form-group">
                  <label for="username">Username *</label>
                  <input type="text" id="username" name="username" required>
                </div>
                <div class="form-group">
                  <label for="department">Department</label>
                  <select id="department" name="department">
                    <option value="">Select Department</option>
                    <option value="IT">Information Technology</option>
                    <option value="HR">Human Resources</option>
                    <option value="Finance">Finance</option>
                    <option value="Marketing">Marketing</option>
                    <option value="Operations">Operations</option>
                  </select>
                </div>
                <div class="form-group">
                  <label>Assign Roles *</label>
                  <div class="role-selection">
                    <div class="role-item">
                      <input type="checkbox" name="roles" value="admin" id="role-admin">
                      <label for="role-admin">Admin</label>
                    </div>
                    <div class="role-item">
                      <input type="checkbox" name="roles" value="supervisor" id="role-supervisor">
                      <label for="role-supervisor">Supervisor</label>
                    </div>
                    <div class="role-item">
                      <input type="checkbox" name="roles" value="user" id="role-user">
                      <label for="role-user">User</label>
                    </div>
                  </div>
                </div>
                <div class="form-group">
                  <label for="password">Password *</label>
                  <input type="password" id="password" name="password" required>
                </div>
                <button type="submit" class="btn btn-primary">Add User</button>
              </form>
            </div>
            <!-- User Statistics Card -->
            <div class="card user-stats-card">
              <h2>User Statistics</h2>
              <div class="stats-grid" style="margin-top:1rem;">
                <div class="stat-card"><div class="stat-icon">üë•</div><div class="stat-content"><h3 id="statTotalUsers">--</h3><p>Total Users</p></div></div>
                <div class="stat-card"><div class="stat-icon">‚úÖ</div><div class="stat-content"><h3 id="statActiveUsers">--</h3><p>Active Users</p></div></div>
                <div class="stat-card"><div class="stat-icon">‚è∏Ô∏è</div><div class="stat-content"><h3 id="statInactiveUsers">--</h3><p>Inactive Users</p></div></div>
                <div class="stat-card"><div class="stat-icon">üõ°Ô∏è</div><div class="stat-content"><h3 id="statAdmins">--</h3><p>Admins</p></div></div>
                <div class="stat-card"><div class="stat-icon">üëî</div><div class="stat-content"><h3 id="statSupervisors">--</h3><p>Supervisors</p></div></div>
                <div class="stat-card"><div class="stat-icon">üë§</div><div class="stat-content"><h3 id="statUsers">--</h3><p>Users</p></div></div>
              </div>
            </div>
          </div>
        </div>
        <!-- Existing Users Table -->
        <div class="card users-table">
          <h2>Existing Users</h2>
          <div class="table-container">
            <table>
              <thead>
                <tr>
                  <th>Name</th>
                  <th>Email</th>
                  <th>Username</th>
                  <th>Department</th>
                  <th>Roles</th>
                  <th>Status</th>
                  <th>Actions</th>
                </tr>
              </thead>
              <tbody id="usersTableBody">
                <!-- Users will be rendered here by JS -->
              </tbody>
            </table>
          </div>
        </div>
      </div>
    </div>

    <div id="facebookTab" class="tab-content">
      <div class="chat-interface">
        <h2>Facebook Chat</h2>
        <div class="chat-container">
          <!-- Sidebar -->
          <div class="chat-sidebar">
            <div class="chat-search">
              <input type="text" placeholder="Search conversations..." id="facebookSearchInput" />
            </div>
            <div class="chat-list" id="facebookChatList">
              <!-- Dynamic chat items will be appended here -->
            </div>
          </div>

          <!-- Main Chat Area -->
          <div class="chat-main">
            <div class="chat-header" id="facebookChatHeader">
              <!-- Dynamic user details will go here -->
            </div>
            <div class="chat-messages" id="facebookChatMessages">
              <div class="chat-message from-me">
                <div class="bubble">Your message here</div>
              </div>
              <div class="chat-message from-them">
                <div class="bubble">Their message here</div>
              </div>
              <!-- Dynamic messages will be loaded here -->
            </div>
            <div class="chat-input">
              <input type="text" placeholder="Type a message..." id="facebookMessageInput" />
              <button class="btn btn-primary" id="facebookSendButton">Send</button>
            </div>
          </div>
        </div>
      </div>
    </div>

    <div id="whatsappTab" class="tab-content">
      <div class="chat-interface">
        <h2>WhatsApp Chat</h2>
        <div class="chat-container">
          <!-- Similar structure to Facebook tab -->
          <div class="chat-sidebar">
            <div class="chat-search">
              <input type="text" placeholder="Search conversations..." />
            </div>
            <div class="chat-list" id="whatsappChatList">
              <!-- WhatsApp conversations will be dynamically loaded here -->
            </div>
          </div>
          <div class="chat-main">
            <div class="chat-header" id="whatsappChatHeader">
              <!-- WhatsApp chat user details will be dynamically loaded here -->
            </div>
            <div class="chat-messages" id="whatsappChatMessages">
              <!-- Messages will be dynamically loaded here -->
            </div>
            <div class="chat-input">
              <input type="text" placeholder="Type a message..." id="whatsappMessageInput" />
              <button class="btn btn-primary" id="whatsappSendButton">Send</button>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <script src="https://cdn.socket.io/4.7.2/socket.io.min.js"></script>
  <script src="script.js"></script>
</body>
</html>
